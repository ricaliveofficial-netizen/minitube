<!doctype html>
<html>
<head><meta charset="utf-8"><title>Upload</title>
<style>body{font-family:Arial;background:#f6f6f6;margin:0;padding:16px}.box{max-width:600px;margin:10px auto;background:#fff;padding:12px;border-radius:8px}input,button{width:100%;padding:10px;margin:8px 0}</style>
</head>
<body>
<div class="box">
  <h3>Upload Video</h3>
  <input id="title" placeholder="Video title" />
  <input type="file" id="file" accept="video/*" />
  <label><input type="checkbox" id="isShort"/> Mark as Short</label>
  <button id="uploadBtn">Upload</button>
  <p id="msg" style="color:green"></p>
</div>

<script>
const API = '/api';
document.getElementById('uploadBtn').onclick = async ()=>{
  const f = document.getElementById('file').files[0];
  const title = document.getElementById('title').value || (f && f.name);
  if(!f) return alert('Select a file');
  const fd = new FormData();
  fd.append('video', f);
  fd.append('title', title);
  try{
    const res = await fetch(`${API}/upload`, { method:'POST', body: fd });
    const j = await res.json();
    if(j.ok){ document.getElementById('msg').innerText='Uploaded'; setTimeout(()=>location.href='dashboard.html',800); }
    else { alert('Upload failed'); console.error(j); }
  }catch(e){ alert('Upload error'); console.error(e); }
};
</script>
</body>
</html>